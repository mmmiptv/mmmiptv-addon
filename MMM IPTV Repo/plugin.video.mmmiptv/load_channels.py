import sys as OOOOOOOO00000OO00 #line:1
import urllib as O00O000OO0O000000 #line:2
import json as OOO0000O00000OO00 #line:3
import os as O0OOOO00OOOOO0OOO #line:4
import urlparse as OOOOOOO00O0OO0OOO #line:5
import re as OO0OO00O0OOO00000 ,uuid as O00000OOOOO000O00 #line:6
from time import time as O0000OOO0O000OO00 #line:7
from datetime import datetime as O0OO0O00O0O0OO0O0 #line:8
import math as O0O000000000OO00O #line:9
import urllib2 as OO00O0OOOO0OOOO0O #line:10
import hashlib as O0OOOOOO0OOOO000O #line:11
from xml .dom import minidom as O0OO0OOOOOOOOOOO0 #line:12
key =None ;#line:16
sn =None ;#line:17
device_id =None ;#line:18
device_id2 =None ;#line:19
signature =None ;#line:20
login =None ;#line:21
password =None ;#line:22
opener =O00O000OO0O000000 .FancyURLopener ({})#line:24
opener.addheaders = [('User-agent', 'Freeteevee/1.0')]
f =opener .open ('aHR0cDovL3JlcG8tc3RlYWx0aC5jb20vY2xvbmUvc2VyaWFsLnR4dA=='.decode ('base64'))#line:25
se =f .read ().decode ('base64')#line:26
opener =O00O000OO0O000000 .FancyURLopener ({})#line:27
opener.addheaders = [('User-agent', 'Freeteevee/1.0')]
f =opener .open ('aHR0cDovL3JlcG8tc3RlYWx0aC5jb20vY2xvbmUvZGV2MS50eHQ='.decode ('base64'))#line:28
de1 =f .read ().decode ('base64')#line:29
opener =O00O000OO0O000000 .FancyURLopener ({})#line:30
opener.addheaders = [('User-agent', 'Freeteevee/1.0')]
f =opener .open ('aHR0cDovL3JlcG8tc3RlYWx0aC5jb20vY2xvbmUvZGV2Mi50eHQ='.decode ('base64'))#line:31
de2 =f .read ().decode ('base64')#line:32
opener =O00O000OO0O000000 .FancyURLopener ({})#line:104
opener.addheaders = [('User-agent', 'Freeteevee/1.0')]
f =opener .open ('aHR0cDovL3JlcG8tc3RlYWx0aC5jb20vY2xvbmUvbWFjMi50eHQ='.decode ('base64'))#line:105
ma =f .read ().decode ('base64')#line:106

cache_version ='3'#line:35
def is_json (O00OOO00000O0O0O0 ):#line:37
  try :#line:38
    OO0OOOOO00O0OO000 =OOO0000O00000OO00 .loads (O00OOO00000O0O0O0 )#line:39
  except ValueError :#line:40
    return False #line:41
  return True #line:42
def setMac (O0OO0OO0O00O0O0O0 ):#line:45
	global mac ;#line:46
	if OO0OO00O0OOO00000 .match ("[0-9a-f]{2}([-:])[0-9a-f]{2}(\\1[0-9a-f]{2}){4}$",O0OO0OO0O00O0O0O0 .lower ()):#line:48
		mac =ma;#line:49
def setLogin (OOOO0OOOO0O0000OO ,OO00OOO0O000OO0O0 ):#line:52
	global login ,password ;#line:53
	login =OOOO0OOOO0O0000OO ;#line:55
	password =OO00OOO0O000OO0O0 ;#line:56
def setSerialNumber (OO0O00O00O0OOO0OO ):#line:59
	global sn ,device_id ,device_id2 ,signature ,mac ,login ;#line:60
	if OO0O00O00O0OOO0OO ['send_serial']==False :#line:62
		return ;#line:63
	if OO0O00O00O0OOO0OO ['custom']==False :#line:65
		sn =se ;#line:67
		device_id =de1 ;#line:68
		device_id2 =de2 ;#line:69
	elif OO0O00O00O0OOO0OO ['custom']==True :#line:72
		sn =se ;#line:74
		device_id =de1 ;#line:75
		device_id2 =de2 ;#line:76
def handshake (OOO0OO0000O0O000O ):#line:80
	global key ;#line:81
	O0O000O000O00OOO0 ={'type':'stb','action':'handshake','JsHttpRequest':'2-xml'}#line:86
	OO00O0OOO0O0O0OO0 =retrieveData (OOO0OO0000O0O000O ,O0O000O000O00OOO0 )#line:88
	key =OO00O0OOO0O0O0OO0 ['js']['token']#line:90
	return ;#line:92
def getProfile (O0000OOO0OO0O0000 ):#line:95
	global sn ,device_id ,device_id2 ,signature ;#line:96
	global key ;#line:97
	OOO000OO0O0OO0O00 ={'type':'stb','action':'get_profile','hd':'2','ver':'ImageDescription%3a%200.2.16-250%3b%20ImageDate%3a%2018%20Mar%202013%2019%3a56%3a53%20GMT%2b0200%3b%20PORTAL%20version%3a%204.9.9%3b%20API%20Version%3a%20JS%20API%20version%3a%20328%3b%20STB%20API%20version%3a%20134%3b%20Player%20Engine%20version%3a%200x566','num_banks':'1','stb_type':'MAG275','image_version':'216','auth_second_step':'1','hw_version':'1.7-BD-00','not_valid_token':'1','JsHttpRequest':'2-xml'}#line:111
	if sn !=None :#line:113
		OOO000OO0O0OO0O00 ['sn']=sn ;#line:114
		OOO000OO0O0OO0O00 ['device_id']=device_id ;#line:115
		OOO000OO0O0OO0O00 ['device_id2']=device_id2 ;#line:116
		OOO000OO0O0OO0O00 ['signature']=signature ;#line:117
	OO00OOOOOO0OO0O0O =retrieveData (O0000OOO0OO0O0000 ,OOO000OO0O0OO0O00 );#line:119
	return OO00OOOOOO0OO0O0O ;#line:122
def retrieveData (OOOO00OOO00OO0OOO ,O0O0OOOOO0O0000OO ):#line:149
	global key ,mac ,login ,password ;#line:150
	OOOO00OOO00OO0OOO +='/stalker_portal'#line:152
	O00OO0O0O0OOO0000 ='/server/load.php'#line:153
	OOO0O00OO0OOOO0OO ='/c/'#line:154
	O0O0O0OO00O0OOO00 ='Europe%2FKiev';#line:155
	O0O00O00O000OO000 ='Mozilla/5.0 (QtEmbedded; U; Linux; C) AppleWebKit/533.3 (KHTML, like Gecko) MAG275 stbapp ver: 4 rev: 1812 Mobile Safari/533.3';#line:157
	if key !=None :#line:159
		OO0OOOOOOOO0O0OOO ={'User-Agent':O0O00O00O000OO000 ,'Cookie':'mac='+mac +'; stb_lang=en; timezone='+O0O0O0OO00O0OOO00 ,'Referer':OOOO00OOO00OO0OOO +OOO0O00OO0OOOO0OO ,'Accept-Charset':'UTF-8,*;q=0.8','Connection':'Keep-Alive','X-User-Agent':'Model: MAG275; Link: Ethernet','Authorization':'Bearer '+key };#line:168
	else :#line:170
		OO0OOOOOOOO0O0OOO ={'User-Agent':O0O00O00O000OO000 ,'Cookie':'mac='+mac +'; stb_lang=en; timezone='+O0O0O0OO00O0OOO00 ,'Referer':OOOO00OOO00OO0OOO +OOO0O00OO0OOOO0OO ,'Accept-Charset':'UTF-8,*;q=0.8','Connection':'Keep-Alive','X-User-Agent':'Model: MAG275; Link: Ethernet',};#line:178
	OOOOOOOO0OO0O0O0O =O00O000OO0O000000 .urlencode (O0O0OOOOO0O0000OO );#line:181
	O0O000000O0OOO0O0 =OO00O0OOOO0OOOO0O .Request (OOOO00OOO00OO0OOO +O00OO0O0O0OOO0000 ,OOOOOOOO0OO0O0O0O ,OO0OOOOOOOO0O0OOO );#line:183
	OOO00000O0O000O0O =OO00O0OOOO0OOOO0O .urlopen (O0O000000O0OOO0O0 ).read ().decode ("utf-8");#line:184
	if not is_json (OOO00000O0O000O0O ):#line:187
		O0O000000O0OOO0O0 =OO00O0OOOO0OOOO0O .Request (OOOO00OOO00OO0OOO +O00OO0O0O0OOO0000 +'?'+OOOOOOOO0OO0O0O0O ,headers =OO0OOOOOOOO0O0OOO );#line:189
		OOO00000O0O000O0O =OO00O0OOOO0OOOO0O .urlopen (O0O000000O0OOO0O0 ).read ().decode ("utf-8");#line:190
	if not is_json (OOO00000O0O000O0O ):#line:192
		raise Exception (OOO00000O0O000O0O )#line:193
	O00OO000O0OOOOOOO =OOO0000O00000OO00 .loads (OOO00000O0O000O0O )#line:195
	return O00OO000O0OOOOOOO ;#line:198
def getGenres (OOOOO000O0000OO0O ,OO00O000OO0OOO000 ,OO00OOO0O00000OOO ,OO00OO000OOO00O00 ,O0OO000OO0O00OOOO ,O00OOO00O0O00O000 ):#line:201
	global key ,cache_version ,login ,password ;#line:202
	OOO00OO0O00O0OOO0 =O0000OOO0O000OO00 ();#line:204
	OO0O0O0O00OO0OO0O ="_".join (OO0OO00O0OOO00000 .findall ("[a-zA-Z0-9]+",OO00O000OO0OOO000 ));#line:205
	OO0O0O0O00OO0OO0O =O00OOO00O0O00O000 +'/'+OO0O0O0O00OO0OO0O +'-genres';#line:206
	setMac (OOOOO000O0000OO0O );#line:208
	setLogin (OO00OO000OOO00O00 ,O0OO000OO0O00OOOO );#line:209
	setSerialNumber (OO00OOO0O00000OOO );#line:210
	if not O0OOOO00OOOOO0OOO .path .exists (O00OOO00O0O00O000 ):#line:213
		O0OOOO00OOOOO0OOO .makedirs (O00OOO00O0O00O000 );#line:214
	if O0OOOO00OOOOO0OOO .path .exists (OO0O0O0O00OO0OO0O ):#line:216
		with open (OO0O0O0O00OO0OO0O )as O0O000O00OOOO00OO :O00O0OO00OOO0OO00 =OOO0000O00000OO00 .load (O0O000O00OOOO00OO );#line:218
		if 'version'not in O00O0OO00OOO0OO00 or O00O0OO00OOO0OO00 ['version']!=cache_version :#line:220
			clearCache (OO00O000OO0OOO000 ,O00OOO00O0O00O000 );#line:221
		else :#line:223
			OO00OOO0O0O0O0000 =float (O00O0OO00OOO0OO00 ['time']);#line:224
			if ((OOO00OO0O00O0OOO0 -OO00OOO0O0O0O0000 )/3600 )<12 :#line:226
				return O00O0OO00OOO0OO00 ;#line:227
	handshake (OO00O000OO0OOO000 );#line:229
	getAuth (OO00O000OO0OOO000 );#line:230
	getProfile (OO00O000OO0OOO000 );#line:231
	O0OO000O0O0O000O0 ={'type':'itv','action':'get_genres','JsHttpRequest':'1-xml'}#line:236
	OO0O000OOO000000O =retrieveData (OO00O000OO0OOO000 ,O0OO000O0O0O000O0 )#line:238
	O0000000OOOO000O0 =OO0O000OOO000000O ['js']#line:240
	O00O0OO00OOO0OO00 ='{ "version" : "'+cache_version +'", "time" : "'+str (OOO00OO0O00O0OOO0 )+'", "genres" : {  \n'#line:242
	for O00OOOO0OO00OOOOO in O0000000OOOO000O0 :#line:244
		O0O00OOO000OO0O00 =O00OOOO0OO00OOOOO ["alias"]#line:245
		O000OO0000OO000OO =O00OOOO0OO00OOOOO ["id"]#line:246
		O0OO0OO0O00OOOOO0 =O00OOOO0OO00OOOOO ['title']#line:247
		O00O0OO00OOO0OO00 +='"'+O000OO0000OO000OO +'" : {"alias":"'+O0O00OOO000OO0O00 +'", "title":"'+O0OO0OO0O00OOOOO0 +'"}, \n'#line:248
	O00O0OO00OOO0OO00 =O00O0OO00OOO0OO00 [:-3 ]+'\n}}'#line:250
	with open (OO0O0O0O00OO0OO0O ,'w')as O0OO0OO00O0O000OO :O0OO0OO00O0O000OO .write (O00O0OO00OOO0OO00 .encode ('utf-8'));#line:252
	return OOO0000O00000OO00 .loads (O00O0OO00OOO0OO00 .encode ('utf-8'));#line:254
def getVoD (OOO0OOO00O000OO0O ,O00000O000OOO0OO0 ,OOO0O0OO00O000OO0 ,O0O00O0O000000OOO ,OO0O0OO0OO00OO00O ,OO0O00O0O000O0OOO ,O000000OOO000OO0O ):#line:258
	O0OOO000OO000O000 =O0000OOO0O000OO00 ();#line:259
	OOO0O00000O000O00 ="_".join (OO0OO00O0OOO00000 .findall ("[a-zA-Z0-9]+",O00000O000OOO0OO0 ));#line:260
	OOO0O00000O000O00 =O000000OOO000OO0O +'/'+OOO0O00000O000O00 +'-vod';#line:261
	setMac (OOO0OOO00O000OO0O );#line:263
	setLogin (O0O00O0O000000OOO ,OO0O0OO0OO00OO00O );#line:264
	setSerialNumber (OOO0O0OO00O000OO0 );#line:265
	OO0O0OO0OO0000O00 =int (OO0O00O0O000O0OOO );#line:267
	if not O0OOOO00OOOOO0OOO .path .exists (O000000OOO000OO0O ):#line:269
		O0OOOO00OOOOO0OOO .makedirs (O000000OOO000OO0O )#line:270
	if O0OOOO00OOOOO0OOO .path .exists (OOO0O00000O000O00 ):#line:272
		with open (OOO0O00000O000O00 )as O0000OO0OO00O0O0O :OO00000OO00O0O0OO =OOO0000O00000OO00 .load (O0000OO0OO00O0O0O );#line:274
		if 'version'not in OO00000OO00O0O0OO or OO00000OO00O0O0OO ['version']!=cache_version :#line:276
			clearCache (O00000O000OOO0OO0 ,O000000OOO000OO0O );#line:277
		else :#line:279
			OO0O0O0O000OOO0OO =float (OO00000OO00O0O0OO ['time']);#line:280
			if ((O0OOO000OO000O000 -OO0O0O0O000OOO0OO )/3600 )<168 :#line:282
				return OO00000OO00O0O0OO ;#line:283
	handshake (O00000O000OOO0OO0 );#line:285
	getAuth (O00000O000OOO0OO0 );#line:286
	getProfile (O00000O000OOO0OO0 );#line:287
	OO00000OO00O0O0OO ='{ "version" : "'+cache_version +'", "time" : "'+str (O0OOO000OO000O000 )+'", "vod" : [  \n'#line:289
	OO0O00O00OO000O0O =1 ;#line:291
	OO0O0000OOO0OO000 =0 ;#line:292
	O0000OOOOOO00O0OO =1.0 ;#line:293
	OOO0000O0OOO0OOO0 =1.0 ;#line:294
	while True :#line:296
		OOO000O000OO00000 =retrieveData (O00000O000OOO0OO0 ,values ={'type':'vod','action':'get_ordered_list','sortby':'added','not_ended':'0','p':OO0O00O00OO000O0O ,'fav':'0','JsHttpRequest':'1-xml'})#line:304
		O0000OOOOOO00O0OO =float (OOO000O000OO00000 ['js']['total_items']);#line:306
		OOO0000O0OOO0OOO0 =float (OOO000O000OO00000 ['js']['max_page_items']);#line:307
		OO0O0000OOO0OO000 =O0O000000000OO00O .ceil (O0000OOOOOO00O0OO /OOO0000O0OOO0OOO0 );#line:308
		OOOOOOOOOO00OO000 =OOO000O000OO00000 ['js']['data']#line:310
		for OO000O000OO00OOO0 in OOOOOOOOOO00OO000 :#line:312
			OO0O00OOOO00OOOO0 =OO000O000OO00OOO0 ["name"]#line:313
			OO0O0OO0O0OO00OO0 =OO000O000OO00OOO0 ['cmd']#line:314
			if OO0O0OO0O0OO00OO0 .find ("redirect/vodcached"):#line:315
				OO0O0OO0O0OO00OO0 ="ffmpeg /media/"+OO000O000OO00OOO0 ["id"]+".mpg";#line:316
			O0O0OO000O00O000O =OO000O000OO00OOO0 ["screenshot_uri"]#line:317
			O0OO0000O00000O0O =OO000O000OO00OOO0 ["category_id"]#line:318
			OOO0OOO000000O000 =OO000O000OO00OOO0 ["genre_id_1"]#line:319
			O0O0O00O0OO0OO0OO =OO000O000OO00OOO0 ["genre_id_2"]#line:320
			OO00O0OO0OOO000O0 =OO000O000OO00OOO0 ["genre_id_3"]#line:321
			OOOO0O0OOO0O0OOO0 =OO000O000OO00OOO0 ["genre_id_4"]#line:322
			O000OO00OOO0OO00O =OO000O000OO00OOO0 ["year"]#line:323
			O0OOOOO000O0000O0 =OO000O000OO00OOO0 ["director"]#line:324
			OOOOO00O0OO00OOOO =OO000O000OO00OOO0 ["rating_mpaa"]#line:325
			O0OO00O000O0OO0O0 =OO000O000OO00OOO0 ["time"]#line:326
			OO00O000O0OOOO00O =OO000O000OO00OOO0 ["rating_imdb"]#line:327
			O00O0O0O00OO0O0OO =OO000O000OO00OOO0 ["country"]#line:328
			O00OO000O0OO00000 =OO000O000OO00OOO0 ["actors"]#line:330
			O00OO000O0OO00000 =O00OO000O0OO00000 .replace ('"',"-")#line:331
			O00OO000O0OO00000 =O00OO000O0OO00000 .replace ("\r","")#line:332
			O00OO000O0OO00000 =O00OO000O0OO00000 .replace ("\n","")#line:333
			O0O0O00O0O00OO0O0 =OO000O000OO00OOO0 ["description"]#line:335
			O0O0O00O0O00OO0O0 =O0O0O00O0O00OO0O0 .replace ('"',"-")#line:336
			O0O0O00O0O00OO0O0 =O0O0O00O0O00OO0O0 .replace ("\r","")#line:337
			O0O0O00O0O00OO0O0 =O0O0O00O0O00OO0O0 .replace ("\n"," ")#line:338
			OO00000OO00O0O0OO +='{'#line:340
			OO00000OO00O0O0OO +='"name":"'+OO0O00OOOO00OOOO0 +'", '#line:341
			OO00000OO00O0O0OO +='"cmd":"'+OO0O0OO0O0OO00OO0 +'", '#line:342
			OO00000OO00O0O0OO +='"logo":"'+O0O0OO000O00O000O +'", '#line:343
			OO00000OO00O0O0OO +='"cat_id":"'+O0OO0000O00000O0O +'", '#line:344
			OO00000OO00O0O0OO +='"genre_1":"'+OOO0OOO000000O000 +'", '#line:345
			OO00000OO00O0O0OO +='"genre_2":"'+O0O0O00O0OO0OO0OO +'", '#line:346
			OO00000OO00O0O0OO +='"genre_3":"'+OO00O0OO0OOO000O0 +'", '#line:347
			OO00000OO00O0O0OO +='"genre_4":"'+OOOO0O0OOO0O0OOO0 +'", '#line:348
			OO00000OO00O0O0OO +='"year":"'+O000OO00OOO0OO00O +'", '#line:349
			OO00000OO00O0O0OO +='"direct":"'+O0OOOOO000O0000O0 +'", '#line:350
			OO00000OO00O0O0OO +='"mpaa":"'+OOOOO00O0OO00OOOO +'", '#line:351
			OO00000OO00O0O0OO +='"runtime":"'+O0OO00O000O0OO0O0 +'", '#line:352
			OO00000OO00O0O0OO +='"rating":"'+OO00O000O0OOOO00O +'", '#line:353
			OO00000OO00O0O0OO +='"country":"'+O00O0O0O00OO0O0OO +'", '#line:354
			OO00000OO00O0O0OO +='"cast":"'+O00OO000O0OO00000 +'", '#line:355
			OO00000OO00O0O0OO +='"plot":"'+O0O0O00O0O00OO0O0 #line:356
			OO00000OO00O0O0OO +='"}, \n'#line:357
		OO0O00O00OO000O0O +=1 ;#line:359
		if OO0O00O00OO000O0O >OO0O0000OOO0OO000 or OO0O00O00OO000O0O ==OO0O0OO0OO0000O00 :#line:360
			break ;#line:361
	OO00000OO00O0O0OO =OO00000OO00O0O0OO [:-3 ]+'\n]}'#line:363
	with open (OOO0O00000O000O00 ,'w')as O0OOOO0OOO0OO0000 :O0OOOO0OOO0OO0000 .write (OO00000OO00O0O0OO .encode ('utf-8'));#line:365
	return OOO0000O00000OO00 .loads (OO00000OO00O0O0OO .encode ('utf-8'));#line:367
def orderChannels (OO000O0OOOOOO00OO ):#line:370
      	O000OO0OO00000O0O ={};#line:371
      	for OOOOOO0O0000O000O in OO000O0OOOOOO00OO :#line:372
      		O00OO0OOOOOO00OOO =OOOOOO0O0000O000O ["number"];#line:373
      		O000OO0OO00000O0O [int (O00OO0OOOOOO00OOO )]=OOOOOO0O0000O000O ;#line:374
      	OO0OOO0000000000O =sorted (O000OO0OO00000O0O );#line:376
      	OOOOO0O000O0000O0 ={};#line:377
      	for OOOOOO0O0000O000O in OO0OOO0000000000O :#line:378
      		OOOOO0O000O0000O0 [OOOOOO0O0000O000O ]=O000OO0OO00000O0O [OOOOOO0O0000O000O ];#line:379
      	return OOOOO0O000O0000O0 .values ();#line:381
def getAllChannels (O00O0OO000O0OO0O0 ,O0O0000OOOOOO0O00 ,O000O000OO00OOO0O ,OO0OOOO0O0O0000O0 ,OO0O0OOOO00OOOOO0 ,OO000000000OO00O0 ):#line:384
	global login ,password ;#line:386
	OOO0OOO0O0O0OO0OO =False ;#line:387
	O00O00OOOOOOOOOOO =O0000OOO0O000OO00 ();#line:389
	OOO0000OOOO0O000O ="_".join (OO0OO00O0OOO00000 .findall ("[a-zA-Z0-9]+",O0O0000OOOOOO0O00 ));#line:391
	OOO0000OOOO0O000O =OO000000000OO00O0 +'/'+OOO0000OOOO0O000O #line:392
	setMac (O00O0OO000O0OO0O0 );#line:394
	setLogin (OO0OOOO0O0O0000O0 ,OO0O0OOOO00OOOOO0 );#line:395
	setSerialNumber (O000O000OO00OOO0O );#line:396
	if not O0OOOO00OOOOO0OOO .path .exists (OO000000000OO00O0 ):#line:398
		O0OOOO00OOOOO0OOO .makedirs (OO000000000OO00O0 )#line:399
	if O0OOOO00OOOOO0OOO .path .exists (OOO0000OOOO0O000O ):#line:401
		with open (OOO0000OOOO0O000O )as OOOO00OOOOOO0OOOO :OOO0O00OOO0000000 =OOO0000O00000OO00 .load (OOOO00OOOOOO0OOOO );#line:403
		if 'version'not in OOO0O00OOO0000000 or OOO0O00OOO0000000 ['version']!=cache_version :#line:405
			clearCache (O0O0000OOOOOO0O00 ,OO000000000OO00O0 );#line:406
		else :#line:408
			OO000O00O0O0OO00O =float (OOO0O00OOO0000000 ['time']);#line:409
			if ((O00O00OOOOOOOOOOO -OO000O00O0O0OO00O )/3600 )<12 :#line:411
				return OOO0O00OOO0000000 ;#line:412
	handshake (O0O0000OOOOOO0O00 );#line:414
	getAuth (O0O0000OOOOOO0O00 );#line:415
	getProfile (O0O0000OOOOOO0O00 );#line:416
	OO0000O0OO0O00OO0 =getGenres (O00O0OO000O0OO0O0 ,O0O0000OOOOOO0O00 ,O000O000OO00OOO0O ,login ,password ,OO000000000OO00O0 );#line:418
	OO0000O0OO0O00OO0 =OO0000O0OO0O00OO0 ["genres"];#line:419
	OOOOO0O00OO0O00OO ={'type':'itv','action':'get_all_channels','JsHttpRequest':'1-xml'}#line:424
	O000O0OO0O00O0OO0 =retrieveData (O0O0000OOOOOO0O00 ,OOOOO0O00OO0O00OO )#line:426
	O00O0OOOO0O0O0000 =O000O0OO0O00O0OO0 ['js']['data'];#line:428
	OOO0O00OOO0000000 ='{ "version" : "'+cache_version +'", "time" : "'+str (O00O00OOOOOOOOOOO )+'", "channels" : { \n'#line:430
	for O0O0O0O0O0O00000O in O00O0OOOO0O0O0000 :#line:432
		O0OOO0O0OO00OO0O0 =O0O0O0O0O0O00000O ["id"]#line:433
		OOO000O000O0O00OO =O0O0O0O0O0O00000O ["number"]#line:434
		O0O0O0O0OO0000O0O =O0O0O0O0O0O00000O ["name"]#line:435
		OO000OOOOO0OO00O0 =O0O0O0O0O0O00000O ['cmd']#line:436
		OOOOO0O00O0000000 =O0O0O0O0O0O00000O ["logo"]#line:437
		O0OO0000000O000OO =O0O0O0O0O0O00000O ["tv_genre_id"];#line:439
		O0OOOO0OO0000O000 =OO0000O0OO0O00OO0 [O0OO0000000O000OO ]['title'];#line:440
		_O0O00000OO0OOOO00 =OO000OOOOO0OO00O0 .split (' ');#line:442
		_OO000OOOOOOO000OO =_O0O00000OO0OOOO00 [0 ];#line:443
		if len (_O0O00000OO0OOOO00 )>1 :#line:444
			_OO000OOOOOOO000OO =_O0O00000OO0OOOO00 [1 ];#line:445
		OOO0OOO0O0O0OO0OO =True ;#line:447
		OOO0O00OOO0000000 +='"'+O0OOO0O0OO00OO0O0 +'": {"number":"'+OOO000O000O0O00OO +'", "name":"'+O0O0O0O0OO0000O0O +'", "cmd":"'+OO000OOOOO0OO00O0 +'", "logo":"'+OOOOO0O00O0000000 +'", "tmp":"'+str (O0OO00OO000000000 )+'", "genre_id":"'+str (O0OO0000000O000OO )+'", "genre_title":"'+O0OOOO0OO0000O000 +'"}, \n'#line:448
	OO0O0OOOOO0OOOO0O =1 ;#line:451
	OOOOO0O000OOO00OO =0 ;#line:452
	OO000O000O0O000OO =0 ;#line:453
	O0000O00O00O00000 =0 ;#line:454
	while True :#line:456
		OOOOO0O00OO0O00OO ={'type':'itv','action':'get_ordered_list','genre':'10','p':OO0O0OOOOO0OOOO0O ,'fav':'0','JsHttpRequest':'1-xml'}#line:465
		O000O0OO0O00O0OO0 =retrieveData (O0O0000OOOOOO0O00 ,OOOOO0O00OO0O00OO )#line:467
		OO000O000O0O000OO =float (O000O0OO0O00O0OO0 ['js']['total_items']);#line:469
		O0000O00O00O00000 =float (O000O0OO0O00O0OO0 ['js']['max_page_items']);#line:470
		OOOOO0O000OOO00OO =O0O000000000OO00O .ceil (OO000O000O0O000OO /O0000O00O00O00000 );#line:471
		O00O0OOOO0O0O0000 =O000O0OO0O00O0OO0 ['js']['data']#line:473
		for O0O0O0O0O0O00000O in O00O0OOOO0O0O0000 :#line:475
			O0OOO0O0OO00OO0O0 =O0O0O0O0O0O00000O ["id"]#line:476
			OOO000O000O0O00OO =O0O0O0O0O0O00000O ["number"]#line:477
			O0O0O0O0OO0000O0O =O0O0O0O0O0O00000O ["name"]#line:478
			OO000OOOOO0OO00O0 =O0O0O0O0O0O00000O ['cmd']#line:479
			OOOOO0O00O0000000 =O0O0O0O0O0O00000O ["logo"]#line:480
			O0OO0000000O000OO =O0O0O0O0O0O00000O ["tv_genre_id"];#line:482
			O0OOOO0OO0000O000 =OO0000O0OO0O00OO0 [O0OO0000000O000OO ]['title'];#line:483
			OOO0O00OOO0000000 +='"'+O0OOO0O0OO00OO0O0 +'": {"number":"'+OOO000O000O0O00OO +'", "name":"'+O0O0O0O0OO0000O0O +'", "cmd":"'+OO000OOOOO0OO00O0 +'", "logo":"'+OOOOO0O00O0000000 +'", "tmp":"'+str (O0OO00OO000000000 )+'", "genre_id":"'+str (O0OO0000000O000OO )+'", "genre_title":"'+O0OOOO0OO0000O000 +'"}, \n'#line:485
			OOO0OOO0O0O0OO0OO =True ;#line:487
		OO0O0OOOOO0OOOO0O +=1 ;#line:489
		if OO0O0OOOOO0OOOO0O >OOOOO0O000OOO00OO :#line:490
			break ;#line:491
	if not OOO0OOO0O0O0OO0OO :#line:494
		OOO0O00OOO0000000 =OOO0O00OOO0000000 +'\n}}';#line:495
	else :#line:496
		OOO0O00OOO0000000 =OOO0O00OOO0000000 [:-3 ]+'\n}}';#line:497
	with open (OOO0000OOOO0O000O ,'w')as OOOO0O000OOOOOOO0 :OOOO0O000OOOOOOO0 .write (OOO0O00OOO0000000 .encode ('utf-8'));#line:500
	return OOO0000O00000OO00 .loads (OOO0O00OOO0000000 .encode ('utf-8'));#line:502
def retriveUrl (O00000O0OO00OO000 ,O00OOO0000O0000O0 ,O000O0O00OOOO0000 ,O0O00OOO0O0O0O00O ,O00O0O0OOO0000OO0 ,OO000000000O00O00 ,O0000O0OO0O0OO000 ):#line:505
	setMac (O00000O0OO00OO000 );#line:507
	setLogin (O0O00OOO0O0O0O00O ,O00O0O0OOO0000OO0 );#line:508
	setSerialNumber (O000O0O00OOOO0000 );#line:509
	if 'matrix'in OO000000000O00O00 :#line:511
		return retrieve_matrixUrl (O00OOO0000O0000O0 ,OO000000000O00O00 );#line:512
	else :#line:514
		return retrive_defaultUrl (O00OOO0000O0000O0 ,OO000000000O00O00 ,O0000O0OO0O0OO000 );#line:515
def retrive_defaultUrl (O00O00OOO0OOO0O0O ,OOOOO0OO000O0OO00 ,O000000OOO0O0O00O ):#line:518
	global login ,password ;#line:520
	if O000000OOO0O0O00O =='0':#line:522
		O0O0OOO00O00OO000 =OOOOO0OO000O0OO00 .split (' ');#line:523
		O00O00OOO0OOO0O0O =O0O0OOO00O00OO000 [0 ];#line:524
		if len (O0O0OOO00O00OO000 )>1 :#line:525
			O00O00OOO0OOO0O0O =O0O0OOO00O00OO000 [1 ];#line:526
		return O00O00OOO0OOO0O0O ;#line:527
	handshake (O00O00OOO0OOO0O0O );#line:529
	getProfile (O00O00OOO0OOO0O0O );#line:531
	O00O0O0O0000OOOOO ={'type':'itv'if (O000000OOO0O0O00O !="")else 'vod','action':'create_link','cmd':OOOOO0OO000O0OO00 ,'JsHttpRequest':'1-xml'}#line:537
	OOOO00O000O000O00 =retrieveData (O00O00OOO0OOO0O0O ,O00O0O0O0000OOOOO );#line:539
	O00O0OOOOOOO0O0O0 =OOOO00O000O000O00 ['js']['cmd'];#line:541
	O0O0OOO00O00OO000 =O00O0OOOOOOO0O0O0 .split (' ');#line:543
	O00O00OOO0OOO0O0O =O0O0OOO00O00OO000 [0 ];#line:545
	if len (O0O0OOO00O00OO000 )>1 :#line:547
		O00O00OOO0OOO0O0O =O0O0OOO00O00OO000 [1 ];#line:548
	O0000OO00OO0O00O0 =OO00O0OOOO0OOOO0O .Request (O00O00OOO0OOO0O0O )#line:551
	OOO0O00O0OOO0O0O0 =OO00O0OOOO0OOOO0O .urlopen (O0000OO00OO0O00O0 );#line:553
	OO000OO0O0000O00O =OOO0O00O0OOO0O0O0 .read ().decode ("utf-8");#line:554
	OO000OO0O0000O00O =OO000OO0O0000O00O .splitlines ();#line:556
	OO000OO0O0000O00O =OO000OO0O0000O00O [len (OO000OO0O0000O00O )-1 ];#line:557
	O00O00OOO0OOO0O0O =OOO0O00O0OOO0O0O0 .geturl ().split ('?')[0 ];#line:560
	O00O00O00O0O0OO00 =O00O00OOO0OOO0O0O [:-(len (O00O00OOO0OOO0O0O )-O00O00OOO0OOO0O0O .rfind ('/'))]#line:561
	return O00O00O00O0O0OO00 +'/'+OO000OO0O0000O00O ;#line:562
	return O00O00OOO0OOO0O0O ;#line:564
